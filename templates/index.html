<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prediksi Gangguan Tidur</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">

<div class="container py-5">
    <h1 class="text-center mb-4">Prediksi Sleep Disorder (Random Forest Manual)</h1>

    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card shadow">
                <div class="card-body">
                    <form action="/" method="post">
                        <div class="mb-3">
                            <label>Gender:</label>
                            <select name="gender" class="form-select">
                                <option value="1">Male</option>
                                <option value="0">Female</option>
                            </select>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6 mb-3"><label>Age:</label><input type="number" name="age" class="form-control" required value="30"></div>
                            <div class="col-md-6 mb-3">
                                <label>Occupation (0-10):</label>
                                <select name="occupation" class="form-select">
                                    <option value="0">Doctor</option>
                                    <option value="1">Teacher</option>
                                    <option value="2">Engineer</option>
                                    <option value="3">Nurse</option>
                                    <option value="4">Sales</option>
                                    <option value="5">Others</option>
                                </select>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-6 mb-3"><label>Sleep Duration (Hours):</label><input type="number" step="0.1" name="sleep_duration" class="form-control" value="7.5"></div>
                            <div class="col-md-6 mb-3"><label>Quality of Sleep (1-10):</label><input type="number" name="quality_sleep" class="form-control" value="8"></div>
                        </div>

                        <div class="row">
                            <div class="col-md-6 mb-3"><label>Physical Activity (min/day):</label><input type="number" name="phys_activity" class="form-control" value="60"></div>
                            <div class="col-md-6 mb-3"><label>Stress Level (1-10):</label><input type="number" name="stress" class="form-control" value="5"></div>
                        </div>

                        <div class="mb-3">
                            <label>BMI Category:</label>
                            <select name="bmi" class="form-select">
                                <option value="0">Normal</option>
                                <option value="1">Overweight</option>
                                <option value="2">Obese</option>
                            </select>
                        </div>

                        <div class="row">
                            <div class="col-md-4 mb-3"><label>Heart Rate:</label><input type="number" name="heart_rate" class="form-control" value="70"></div>
                            <div class="col-md-4 mb-3"><label>Systolic BP:</label><input type="number" name="systolic" class="form-control" value="120"></div>
                            <div class="col-md-4 mb-3"><label>Diastolic BP:</label><input type="number" name="diastolic" class="form-control" value="80"></div>
                        </div>

                        <div class="mb-3"><label>Daily Steps:</label><input type="number" name="daily_steps" class="form-control" value="8000"></div>

                        <button type="submit" class="btn btn-primary w-100">Prediksi Sekarang</button>
                    </form>
                </div>
            </div>

            {% if prediction_text %}
            <div class="alert alert-info mt-4 text-center fs-4">
                {{ prediction_text | safe }}
            </div>
            {% endif %}

            {% if tree_plots %}
            <div class="mt-5">
                <h3 class="text-center mb-3">Visualisasi Keputusan Model (Random Forest)</h3>
                <p class="text-center text-muted">Berikut adalah visualisasi dari setiap pohon keputusan yang digunakan untuk voting.</p>
                {% for plot in tree_plots %}
                <div class="card mb-4 shadow-sm">
                    <div class="card-body text-center">
                        <img src="data:image/png;base64,{{ plot }}" class="img-fluid" alt="Tree Visualization">
                    </div>
                </div>
                {% endfor %}
            </div>
            {% endif %}

        </div>
    </div>
</div>

</body>
</html>